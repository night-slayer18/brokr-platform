server:
  port: 8080
  compression:
    enabled: true
    mime-types: application/json,application/graphql+json,text/html,text/xml,text/plain,application/javascript,text/css
    min-response-size: 1024

spring:
  application:
    name: brokr-platform

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/brokr}
    username: ${SPRING_DATASOURCE_USERNAME:nightslayer}
    password: ${SPRING_DATASOURCE_PASSWORD:}
    driver-class-name: org.postgresql.Driver
    hikari:
      # Connection pool configuration for better performance
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    locations: classpath:db

  graphql:
    path: /graphql
    graphiql:
      enabled: true
      path: /graphiql

  # Cache configuration
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=5m
    cache-names:
      - kafkaMessages

jwt:
  secret: ${JWT_SECRET:XB0922J6WcWbXAgtFvmmebkfQUVMcjOqX4oag/xEHNY5E1MTFLQ2KSbqL52fmoGLHYCkkkJfzmGBB4vn6yYHlA==}
  expiration: ${JWT_EXPIRATION:86400}

logging:
  level:
    io.brokr: DEBUG
    io.brokr.kafka.service.KafkaConsumerService: DEBUG
    org.springframework.graphql: DEBUG
    org.apache.kafka: DEBUG